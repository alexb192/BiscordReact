{"ast":null,"code":"// pass in a manifest with a 'bin' field here, and it'll turn it\n// into a properly santized bin object\nconst {\n  join,\n  basename\n} = require('path');\n\nconst normalize = pkg => !pkg.bin ? removeBin(pkg) : typeof pkg.bin === 'string' ? normalizeString(pkg) : Array.isArray(pkg.bin) ? normalizeArray(pkg) : typeof pkg.bin === 'object' ? normalizeObject(pkg) : removeBin(pkg);\n\nconst normalizeString = pkg => {\n  if (!pkg.name) return removeBin(pkg);\n  pkg.bin = {\n    [pkg.name]: pkg.bin\n  };\n  return normalizeObject(pkg);\n};\n\nconst normalizeArray = pkg => {\n  pkg.bin = pkg.bin.reduce((acc, k) => {\n    acc[basename(k)] = k;\n    return acc;\n  }, {});\n  return normalizeObject(pkg);\n};\n\nconst removeBin = pkg => {\n  delete pkg.bin;\n  return pkg;\n};\n\nconst normalizeObject = pkg => {\n  const orig = pkg.bin;\n  const clean = {};\n  let hasBins = false;\n  Object.keys(orig).forEach(binKey => {\n    const base = join('/', basename(binKey.replace(/\\\\|:/g, '/'))).substr(1);\n    if (typeof orig[binKey] !== 'string' || !base) return;\n    const binTarget = join('/', orig[binKey]).replace(/\\\\/g, '/').substr(1);\n    if (!binTarget) return;\n    clean[base] = binTarget;\n    hasBins = true;\n  });\n  if (hasBins) pkg.bin = clean;else delete pkg.bin;\n  return pkg;\n};\n\nmodule.exports = normalize;","map":{"version":3,"sources":["/home/n/React/loginpagedemo/frontend/node_modules/npm-normalize-package-bin/index.js"],"names":["join","basename","require","normalize","pkg","bin","removeBin","normalizeString","Array","isArray","normalizeArray","normalizeObject","name","reduce","acc","k","orig","clean","hasBins","Object","keys","forEach","binKey","base","replace","substr","binTarget","module","exports"],"mappings":"AAAA;AACA;AACA,MAAM;AAACA,EAAAA,IAAD;AAAOC,EAAAA;AAAP,IAAmBC,OAAO,CAAC,MAAD,CAAhC;;AAEA,MAAMC,SAAS,GAAGC,GAAG,IACnB,CAACA,GAAG,CAACC,GAAL,GAAWC,SAAS,CAACF,GAAD,CAApB,GACE,OAAOA,GAAG,CAACC,GAAX,KAAmB,QAAnB,GAA8BE,eAAe,CAACH,GAAD,CAA7C,GACAI,KAAK,CAACC,OAAN,CAAcL,GAAG,CAACC,GAAlB,IAAyBK,cAAc,CAACN,GAAD,CAAvC,GACA,OAAOA,GAAG,CAACC,GAAX,KAAmB,QAAnB,GAA8BM,eAAe,CAACP,GAAD,CAA7C,GACAE,SAAS,CAACF,GAAD,CALb;;AAOA,MAAMG,eAAe,GAAGH,GAAG,IAAI;AAC7B,MAAI,CAACA,GAAG,CAACQ,IAAT,EACE,OAAON,SAAS,CAACF,GAAD,CAAhB;AACFA,EAAAA,GAAG,CAACC,GAAJ,GAAU;AAAE,KAACD,GAAG,CAACQ,IAAL,GAAYR,GAAG,CAACC;AAAlB,GAAV;AACA,SAAOM,eAAe,CAACP,GAAD,CAAtB;AACD,CALD;;AAOA,MAAMM,cAAc,GAAGN,GAAG,IAAI;AAC5BA,EAAAA,GAAG,CAACC,GAAJ,GAAUD,GAAG,CAACC,GAAJ,CAAQQ,MAAR,CAAe,CAACC,GAAD,EAAMC,CAAN,KAAY;AACnCD,IAAAA,GAAG,CAACb,QAAQ,CAACc,CAAD,CAAT,CAAH,GAAmBA,CAAnB;AACA,WAAOD,GAAP;AACD,GAHS,EAGP,EAHO,CAAV;AAIA,SAAOH,eAAe,CAACP,GAAD,CAAtB;AACD,CAND;;AAQA,MAAME,SAAS,GAAGF,GAAG,IAAI;AACvB,SAAOA,GAAG,CAACC,GAAX;AACA,SAAOD,GAAP;AACD,CAHD;;AAKA,MAAMO,eAAe,GAAGP,GAAG,IAAI;AAC7B,QAAMY,IAAI,GAAGZ,GAAG,CAACC,GAAjB;AACA,QAAMY,KAAK,GAAG,EAAd;AACA,MAAIC,OAAO,GAAG,KAAd;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYJ,IAAZ,EAAkBK,OAAlB,CAA0BC,MAAM,IAAI;AAClC,UAAMC,IAAI,GAAGvB,IAAI,CAAC,GAAD,EAAMC,QAAQ,CAACqB,MAAM,CAACE,OAAP,CAAe,OAAf,EAAwB,GAAxB,CAAD,CAAd,CAAJ,CAAkDC,MAAlD,CAAyD,CAAzD,CAAb;AAEA,QAAI,OAAOT,IAAI,CAACM,MAAD,CAAX,KAAwB,QAAxB,IAAoC,CAACC,IAAzC,EACE;AAEF,UAAMG,SAAS,GAAG1B,IAAI,CAAC,GAAD,EAAMgB,IAAI,CAACM,MAAD,CAAV,CAAJ,CACfE,OADe,CACP,KADO,EACA,GADA,EACKC,MADL,CACY,CADZ,CAAlB;AAGA,QAAI,CAACC,SAAL,EACE;AAEFT,IAAAA,KAAK,CAACM,IAAD,CAAL,GAAcG,SAAd;AACAR,IAAAA,OAAO,GAAG,IAAV;AACD,GAdD;AAgBA,MAAIA,OAAJ,EACEd,GAAG,CAACC,GAAJ,GAAUY,KAAV,CADF,KAGE,OAAOb,GAAG,CAACC,GAAX;AAEF,SAAOD,GAAP;AACD,CA1BD;;AA4BAuB,MAAM,CAACC,OAAP,GAAiBzB,SAAjB","sourcesContent":["// pass in a manifest with a 'bin' field here, and it'll turn it\n// into a properly santized bin object\nconst {join, basename} = require('path')\n\nconst normalize = pkg =>\n  !pkg.bin ? removeBin(pkg)\n  : typeof pkg.bin === 'string' ? normalizeString(pkg)\n  : Array.isArray(pkg.bin) ? normalizeArray(pkg)\n  : typeof pkg.bin === 'object' ? normalizeObject(pkg)\n  : removeBin(pkg)\n\nconst normalizeString = pkg => {\n  if (!pkg.name)\n    return removeBin(pkg)\n  pkg.bin = { [pkg.name]: pkg.bin }\n  return normalizeObject(pkg)\n}\n\nconst normalizeArray = pkg => {\n  pkg.bin = pkg.bin.reduce((acc, k) => {\n    acc[basename(k)] = k\n    return acc\n  }, {})\n  return normalizeObject(pkg)\n}\n\nconst removeBin = pkg => {\n  delete pkg.bin\n  return pkg\n}\n\nconst normalizeObject = pkg => {\n  const orig = pkg.bin\n  const clean = {}\n  let hasBins = false\n  Object.keys(orig).forEach(binKey => {\n    const base = join('/', basename(binKey.replace(/\\\\|:/g, '/'))).substr(1)\n\n    if (typeof orig[binKey] !== 'string' || !base)\n      return\n\n    const binTarget = join('/', orig[binKey])\n      .replace(/\\\\/g, '/').substr(1)\n\n    if (!binTarget)\n      return\n\n    clean[base] = binTarget\n    hasBins = true\n  })\n\n  if (hasBins)\n    pkg.bin = clean\n  else\n    delete pkg.bin\n\n  return pkg\n}\n\nmodule.exports = normalize\n"]},"metadata":{},"sourceType":"script"}